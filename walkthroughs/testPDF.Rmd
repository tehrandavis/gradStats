---
title: "R Notebook"
output:
  pdf_document: default
  html_notebook: default
---
# Measures of distribution, central tendency, PLOTS... oh my!

We covered a lot of ground this week talking about measures of central tendency and introducing ourselves to distributions. When you get a chance be sure to check out some of the in-class workshopping code and examples on RStudio.cloud. These will help you remember what we did in the workshop and you can compare them to your source and output.

This week I want to expand upon a few things that were touched upon in the workshop and in lecture. This one might be a little lengthly, but it should serve to supplement your assigned readings and help you a little with the home work. Before jumping in, let's install and load the necessary packages in R. This week we will make use of `psych` and several of the core packages of the `tidyverse`. We'll also be using `pander()`

Using the `cheat code` from last week's **Level-up**:

```{r}
# 1. check to see if pacman is on your computer and if not, let's install it:
if (!require("pacman")) install.packages("pacman",repos="http://cran.us.r-project.org")

# 2. install all other packages that we will be using:
pacman::p_load(psych, tidyverse, pander)
```

Throughout this walkthrough we'll use data from an example provided in the Howell textbook (Table 2.1). Let's start by reading that data into `R`. Since the data was reaction time data, let's just name it `RTData`. Note that I'm just using the code generated by the GUI method of data loading (see Week 1):

```{r}
# importing data:
RTData <- readr::read_csv(file = "datasets/Tab2-1.dat")
```

Invoking `class(RTData)` tells us that RTData is a data frame. Invoking `names(RTData)` provides us with the header names (but you already knew that):

```{r}
class(RTData)
names(RTData)
```

Building from last week's homework assignment, we can call individual columns within the data frame using the `$` operator:

```{r}
# column of Trial(s):
RTData$Trial

# column of RxTime (reaction time)
RTData$RxTime
```

## Getting measures of central tendency

We can use simple functions to get the mean, median, and standard deviation of a vector:

```{r}
mean(RTData$RxTime) #mean
median(RTData$RxTime) #median
sd(RTData$RxTime) #std. dev.
```

However, most of the data that we deal with comes in the for of data frames (e.g., `tibbles`. In this week's workshop, we touched upon using `psych::describe()` to generate summary stats of all data in a data frame:
```{r}
psych::describe(RTData)
```

This provides info related to the:

1. item name
2. item number
3. number of valid cases
4. mean
5. standard deviation
6. trimmed mean (with trim defaulting to .1)
7. median (standard or interpolated)
8. mad: median absolute deviation (see Leys et al, 2013)
9. minimum value
10. maximum value
11. skew
12. kurtosis
13. standard error

### turning numeric data into categorical

As you can see we get a mean, sd, median, etc for `NStim`, **BUT SHOULD WE?** The number of stimuli is not numerical properly... but instead represent experimental categories. The same can be said for the `YesNo` data. We need to tell `R` that these data are categories, or _factors_ and not continuous numbers. To do so we can call on the `factor()` function as below.

```{r}
# convert a numeric to a categorical (i.e., make a factor)
factor(RTData$NStim)
```

When you run the line above you'll note at the end of the output it mentions `Levels: 1 3 5`. This is telling you that in this vector, there are three levels, or conditions in this factor- number of stimuli = 1; number of stimuli = 3; number of stimuli = 5. To connect this factorized vector to your original data set, you can either create a new column in the data set or overwrite the original `NStim` column that you are replacing. For beginners, I would recommend adding a new column. To do this, let's take advantage of some of those fancy `tidyverse` / `dplyr` skills you picked up from DataCamp:

```{r}
# 1. create a new vector attached to the original data frame
#    using the dplyr::mutate function:

RTData <- RTData %>% dplyr::mutate(categoricalNStim = factor(NStim))
psych::describe(RTData) 
```
The asterisk next to `categoricalNStim` lets you know it's categorical. 

Note that you could have just strung several pipes together and obviated the need to save to an object. This is useful if you just want to print the output and don't need to save it for later use.

```{r}
RTData %>% 
  dplyr::mutate(categoricalNStim = factor(NStim)) %>%
  psych::describe() 
```

Now that I look at it, `YesNo` is categorical as well. This can be accomplished by just adding another argument to `mutate`:

```{r}
RTData %>% 
  dplyr::mutate(categoricalNStim = factor(NStim),
                categoricalYesNo = factor(YesNo)) %>%
  psych::describe() 
```

### Getting summary stats by groups or conditions

You may also get summary statistics subsetted for individual `group`s. In this case the `NStim` column represents experimental conditions (num. of stimuli = 1, num. of stimuli = 3, num. of stimuli = 5). To take a look at the summary stat by condition we use the `psych::describeBy()` function:

```{r}
psych::describeBy(RTData,group = RTData$NStim)
```

## Creating a table of summary stats

I personally am not a big fan of presenting / publishing data in tables. My feeling is that all things being equal, an good plot is typically the most effective way to present data. BUT, I recognize that there are times that call for us to present our data in tables.

One downside is that by default, `psych::describe()` doesn't give us nice pretty (APA-esqu) tables, and putting this ouput into a cleaner format requires a little work. In order to do so, we can leverage some of the functions from the `tidyverse`. How you go about constructing a cleaner table depends in large part on the content. For example, if you just wanted to convey the number of observations, mean, and std. dev, then it might be best to construct a summary table using `dplyr::summarize()`. For example a summary of `RxTime`

```{r}
RTData %>% dplyr::summarise("count" = n(),
                            "mean" = mean(RxTime),
                            "sd" = sd(RxTime)
                            ) %>% 
  pander(caption = "Table X. Summary statistics for reaction time")
```


```{r}
RTData %>% 
  group_by(categoricalNStim) %>% 
  dplyr::summarise("count" = n(),
                   "mean" = mean(RxTime),
                   "sd" = sd(RxTime)
                   ) %>% 
  pander(caption = "Table X. Summary statistics for reaction time by group")
```
